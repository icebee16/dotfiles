# tmux version ^2.1
# ==================== #
#  prefix and keybind  #
# ==================== #
# prefix
set -g prefix C-a
unbind C-b

# bind
bind r source-file ~/.tmux.conf \; display "Reload tmux source"

bind C-a send-prefix

bind v split-window -h
bind h split-window -v

bind f select-pane -R
bind b select-pane -L
bind n select-pane -D
bind p select-pane -U

# index 1 start
set -g base-index 1
setw -g pane-base-index 1

# update rendering interval
set -g status-interval 1

# mouse config
setw -g mouse on

# copy mode setting
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection

# linux
if "which xsel" "bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel 'xsel -ip && xsel -op | xsel -ib'";
if "which xsel" "bind-key ] run-shell 'xsel -ob | xargs -0 -I {} tmux set-buffer -- {} && tmux paste-buffer'";
# darwin
if "which pbcopy" "bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel 'pbcopy'";
if "which pbpaste" "bind-key ] run-shell 'pbpaste | xargs -0 -I {} tmux set-buffer -- {} && tmux paste-buffer'";

# ================ #
#  set status bar  #
# ================ #
# all
set -g default-terminal "screen-256color"
set -g status-fg "colour255"
set -g status-bg "colour238"
# left
set -g status-left-length 80
set -g status-left '#{?pane_in_mode,#[bg=colour76] COPY ,#[fg=black,bg=colour238]#{?client_prefix,#[bg=colour231] ⚡︎, - }}#[default]'
set -ga status-left "#[fg=black, bg=blue] #S "
set -ga status-left "#[fg=colour255,bg=colour241] [#P] #W "
set -ga status-left "#($HOME/dotfiles/tmux/tmux-pane-border.sh '#{pane_current_path}')"
# center
set-option -g status-justify "centre"
set-window-option -g window-status-format ""
set-window-option -g window-status-current-format ""
# right
set -g status-right-length 120
set -g status-right "#[fg=colour255,bg=colour241] [%Y/%m/%d %H:%M:%S]"

# ================= #
#  window and pane  #
# ================= #
# set window
setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim

setw -g window-status-current-fg white
setw -g window-status-current-bg red
setw -g window-status-current-attr bright

set -g pane-border-fg green
set -g pane-border-bg black

set -g pane-active-border-fg white
set -g pane-active-border-bg yellow
